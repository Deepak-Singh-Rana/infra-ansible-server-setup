- name: RH link version for motd
  file:
    src: /etc/redhat-release
    dest: /etc/motd.d/10_redhat_release
    state: link
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'RedHat' and ansible_distribution_version >= '8'

- name: remove cockpit motd
  file:
   path: /etc/motd.d/cockpit
   state: absent

- name: RH copy motd.2d redhat 7
  copy:
    src: motd.2d
    dest: /etc/motd.2d
    owner: root
    group: root
    mode: '0644'
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'RedHat' and ansible_distribution_version == '7'

- name: RH link /etc/motd.2d to /etc/motd redhat 7
  file:
    src: /etc/motd.2d
    dest: /etc/motd
    state: link
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'RedHat' and ansible_distribution_version == '7'

- name: RH motd.2d redhat 8 and up
  copy:
    src: motd.2d
    dest: /etc/motd.d/05_motd.2d
    owner: root
    group: root
    mode: '0644'
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'RedHat' and ansible_distribution_version >= '8'

- name: RH link /etc/motd.2d to /etc/motd redhat 7
  file:
    src: /etc/motd.2d
    dest: /etc/motd.d/05_motd.2d
    state: link
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'RedHat' and ansible_distribution_version >= '8'

- name: UB 2d message of the day ubuntu 18 and up
  copy:
    src: motd.2d
    dest: /etc/motd.2d
    owner: root
    group: root
    mode: '0644'
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'Ubuntu' and ansible_distribution_version >= '18'

- name: UB 2d message of the day script ubuntu 18 and up
  copy:
    src: ub-motd-2d
    dest: /etc/update-motd.d/05-motd-2d
    owner: root
    group: root
    mode: '0755'
  ignore_errors: yes
  when: ansible_facts['distribution'] == 'Ubuntu' and ansible_distribution_version >= '18'

- name: UB disable 10-help-text motd
  ansible.builtin.file:
    path: /etc/update-motd.d/10-help-text
    owner: root
    group: root
    mode: '0600'
  when: ansible_facts['distribution'] == 'Ubuntu'
